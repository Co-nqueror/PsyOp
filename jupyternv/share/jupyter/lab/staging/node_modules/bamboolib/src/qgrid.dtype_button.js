var $ = require('jquery');

function render_dtype_button(column, header_node, qgrid) {

    if ('is_index' in column) {
        // dont render button
    } else {
        dtype_abbreviation = column.type.charAt(0);
        var button = $(`
            <div class='dtype-button'>
                ${dtype_abbreviation}
            </div>
        `);
        button.prependTo(header_node);
        button.click((event) => on_button_click(event, column, header_node, qgrid));
    }
}

function on_button_click(event, column, header_node, qgrid) {
    event.stopPropagation();

    var msg = {
        'type': 'bam_change_dtype',
        'field': column.field,
    };
    qgrid.send(msg)
}


module.exports = { 'render_dtype_button': render_dtype_button };
